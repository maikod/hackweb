

<div class="spazio" id="home" style="">
    <div class="inner info">

        <!-- header -->
        <div class="home-header">
            <!-- <img src="img/header.jpg"> -->
        </div>
        
        <!-- accoppiatore -->
        <div class="home-accopiatore">
            ACCOPPIATORE DI S1NGLE
        </div>

        <div>
            <div id="accoppiatore" class="home-accopiatore-carousel" >
<!--                     
                <div class="carousel-cell">            
                    <div class="calzini-barra">LINEA S101</div>
                    <div class="calzini-container">
                        <a><img src="img/calzini/Risorsa 1.png"></a>
                        <a><img src="img/calzini/Risorsa 11.png"></a>    
                        <a><img src="img/calzini/Risorsa 12.png"></a>
                        <a><img src="img/calzini/Risorsa 13.png"></a>
                        <a><img src="img/calzini/Risorsa 14.png"></a>
                        <a><img src="img/calzini/Risorsa 15.png"></a>
                        <a><img src="img/calzini/Risorsa 16.png"></a>
                    </div>
                </div>   
                <div class="carousel-cell">            
                    <div class="calzini-barra">LINE S102</div>
                    <div class="calzini-container">
                        <a><img src="img/calzini/Risorsa 3.png"></a>
                        <a><img src="img/calzini/Risorsa 4.png"></a>    
                        <a><img src="img/calzini/Risorsa 5.png"></a>
                        <a><img src="img/calzini/Risorsa 6.png"></a>
                        <a><img src="img/calzini/Risorsa 7.png"></a>
                        <a><img src="img/calzini/Risorsa 8.png"></a>
                        <a><img src="img/calzini/Risorsa 9.png"></a>
                    </div>
                </div>   

                <div class="carousel-cell">            
                    <div class="calzini-barra">LINEA S103</div>
                    <div class="calzini-container">
                        <a><img src="img/calzini/Risorsa 3.png"></a>
                        <a><img src="img/calzini/Risorsa 4.png"></a>    
                        <a><img src="img/calzini/Risorsa 5.png"></a>
                        <a><img src="img/calzini/Risorsa 6.png"></a>
                        <a><img src="img/calzini/Risorsa 7.png"></a>
                        <a><img src="img/calzini/Risorsa 8.png"></a>
                        <a><img src="img/calzini/Risorsa 9.png"></a>
                    </div>
                </div>  

                <div class="carousel-cell">            
                    <div class="calzini-barra">LINEA S103</div>
                    <div class="calzini-container">
                        <a><img src="img/calzini/Risorsa 3.png"></a>
                        <a><img src="img/calzini/Risorsa 4.png"></a>    
                        <a><img src="img/calzini/Risorsa 5.png"></a>
                        <a><img src="img/calzini/Risorsa 6.png"></a>
                        <a><img src="img/calzini/Risorsa 7.png"></a>
                        <a><img src="img/calzini/Risorsa 8.png"></a>
                        <a><img src="img/calzini/Risorsa 9.png"></a>
                    </div>
                </div>   -->
                <!-- <div class="carousel-cell">            
                    <div class="calzini-barra">LINEA S103</div>
                    <div class="calzini-container"></div>
                </div>    
                <div class="carousel-cell">            
                    <div class="calzini-barra">LINEA S104</div>
                    <div class="calzini-container"></div>
                </div> -->
            </div>


            <div class="home-accopiatore-view">
                <!-- <img src="img/tracciato-calzini.png"> -->
                <img class="calzino-1" src="img/tracciato-calzino.png">
                <img class="calzino-2" src="img/tracciato-calzino.png">
            </div>


            <div class="home-accopiatore-actions-container max-w">
                <div class="home-accopiatore-actions">                
                    <button type="button" class="btn btn-danger btn-accopiatore-buy">MI PIACE... LA VOGLIO</button>
                    <div id='product-component-32146857162'></div>
                    <button type="button" class="btn btn-primary btn-accopiatore-share">CONDIVIDI LA TUA SCELTA</button>            
                </div>
            </div>


            <div class="home-header home-header-2 ">
                
            </div>


            <div class="home-title ">
                CATALOGO S1NGLE
            </div>

            <div class="home-catalogo max-w">
                <div id="buy-1" class="home-catalogo-barra">
                    LINEA S101
                    <!-- <div  class="home-catalogo-buy">
                        SHOP    
                    </div> -->
                    <div class="home-catalogo-hider">
                    </div>
                </div>
                <div class="home-catalogo-calzini-container">
                    <img src="img/catalogo/serie1.png">
                </div>

                <div class="home-catalogo-barra">
                    LINEA S102
                    <div class="home-catalogo-buy">
                        SHOP
                    </div>
                    <div class="home-catalogo-hider">
                    </div>
                </div>
                <div class="home-catalogo-calzini-container">
                    <img src="img/catalogo/serie2.png">
                </div>

                <div class="home-catalogo-barra">
                    LINEA S103
                    <div class="home-catalogo-buy">
                        SHOP
                    </div>
                    <div class="home-catalogo-hider">
                    </div>
                </div>
                <div class="home-catalogo-calzini-container">
                    <img src="img/catalogo/serie3.png">
                </div>

                <div class="home-catalogo-barra">
                    LINEA S104
                    <div class="home-catalogo-buy">
                        SHOP
                    </div>
                    <div class="home-catalogo-hider">
                    </div>
                </div>
                <div class="home-catalogo-calzini-container">
                    <img src="img/catalogo/serie4.png">
                </div>

                <div class="home-catalogo-barra">
                    LINEA S105
                    <div class="home-catalogo-buy">
                        SHOP
                    </div>
                    <div class="home-catalogo-hider">
                    </div>
                </div>
                <div class="home-catalogo-calzini-container">
                    <img src="img/catalogo/serie5.png">
                </div>

                <div class="home-catalogo-barra">
                    LINEA S106
                    <div class="home-catalogo-buy">
                        SHOP
                    </div>
                    <div class="home-catalogo-hider">
                    </div>
                </div>
                <div class="home-catalogo-calzini-container">
                    <img src="img/catalogo/serie6.png">
                </div>

                <div class="home-catalogo-barra">
                    LINEA S107
                    <div class="home-catalogo-buy">
                        SHOP
                    </div>
                    <div class="home-catalogo-hider">
                    </div>
                </div>
                <div class="home-catalogo-calzini-container">
                    <img src="img/catalogo/serie7.png">
                </div>

            </div>
        </div>
    </div>
</div>

<script>
var current = 2;
var start;
var longpress = 100;
var acc_socks = 0;
var $el1;
var $el2;
var last_el;

// $(".calzino-1-big").draggable();
// $(".calzino-2-big").draggable();

var accopiatoreClickStart = function (e){			
	e.preventDefault();				
	var $anchor = $(this);
	start = new Date().getTime();	
}

var accopiatoreClickEnd = function (e){	  
	e.preventDefault();				
	var $anchor = $(this);	
	if ( new Date().getTime() >= ( start + longpress )  ) {
		//
	} else {
		addCalzino($anchor);
	}	
}

var addCalzino = function($el){ 
    prev_current = current;
    if(current==2) current = 1;
    else current = 2;
    $('.calzino-'+prev_current).attr('src','img/calzini-big/serie'+current+'-1.png');

    acc_socks++;
    if(isOdd(acc_socks) == 1){
        $el1 = $el;
    }else{
        $el2 = $el;
    }    

    console.log($el.attr('title'));

    //accoppiatore buy    
    if(acc_socks > 1){
        $('.btn-accopiatore-buy').show();
        $('.btn-accopiatore-share').show();

        $('.btn-accopiatore-buy').off('click');    
        $('.btn-accopiatore-buy').click(function(e){        
            e.preventDefault();
            console.log($el1.attr('id'));
            console.log($el2.attr('id'));            
            // $('.home-catalogo-buy', $('#buy-1')).click();
            $('.home-accoppiatore-buy', $el1).click();
            setTimeout(function(){
                $('.home-accoppiatore-buy', $el2).click();
            }, 500);            
            return false;
        });
    }    
}

// $('.calzini-container a').click(function(e){
//   prev_current = current;
//   if(current==2) current = 1;
//   else current = 2;
//   $('.calzino-'+prev_current).attr('src','img/calzini-big/serie'+current+'-1.png');
// })


//shopify
fetchAllCollections().then(function(data){
    var collections = data;    
    var products = null;
    // console.log(data[0].products)
        
    for (var i = 0; i < collections.length; i++) {        
        products = collections[i].products;        
        $('#accoppiatore').append('<div class="carousel-cell">'+            
            '<div class="calzini-barra">'+collections[i].title+'</div>'+
            '<div class="calzini-container" id="'+collections[i].id+'"></div></div>');                                                                    
        for (var y = 0; y < products.length; y++) {
            $('#'+collections[i].id).append('<a id="'+products[y].id+'" title="'+products[y].title+'"><img src="'+products[y].images[0].src+'"><div class="buy-hidden" id="bh_'+products[y].id+'"></div></a>');                                    
            //shopify
            ui.createComponent('product', {
                // id: 599055990839,
                handle: products[y].handle,
                node: document.getElementById('bh_'+products[y].id),
                options: shop_options_accoppiatore,    
            });
        }        
    }            

    //set click
    //mouse
    $('.calzini-container a').unbind('pointerdown', accopiatoreClickStart);
    $('.calzini-container a').bind('pointerdown', accopiatoreClickStart);
    $('.calzini-container a').unbind('pointerup', accopiatoreClickEnd);
    $('.calzini-container a').bind('pointerup', accopiatoreClickEnd);
    $('.calzini-container a').unbind('mousedown', accopiatoreClickStart);
    $('.calzini-container a').bind('mousedown', accopiatoreClickStart);
    $('.calzini-container a').unbind('mouseup', accopiatoreClickEnd);
    $('.calzini-container a').bind('mouseup', accopiatoreClickEnd);
    //touch
    $('.calzini-container a').unbind('touchstart', accopiatoreClickStart);
    $('.calzini-container a').bind('touchstart', accopiatoreClickStart);
    $('.calzini-container a').unbind('touchend', accopiatoreClickEnd);
    $('.calzini-container a').bind('touchend', accopiatoreClickEnd);  

    $('.home-accopiatore-carousel').imagesLoaded(function(){         
        $carousel = $('.home-accopiatore-carousel').frankousel({
            autoPlay: false,
            wrapAround: true,
            imagesLoaded: true,
            cellAlign: 'center'        
        });
        window.setTimeout(function(){               
            if (typeof $carousel != 'undefined' || $carousel != null) $carousel.frankousel('resize');
            // $('.frankousel-page-dots').css('opacity', '0');                              
        }, 500);        	        
    });    
});

//shopify linee
ui.createComponent('product', {
    id: 599055990839,
    node: document.getElementById('buy-1'),
    options: shop_options,    
});

//accoppiatore buy
// $('.btn-accopiatore-buy').click(function(e){
//     e.preventDefault();
//     $('.home-catalogo-buy', $('#buy-1')).click();
//     return false;
// });


</script>